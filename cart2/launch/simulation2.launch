<launch> 
  <group ns="cart2">
    <rosparam command="load" file="$(find caddy_uwsim)/launch/simulation.yaml" />
    <rosparam command="load" file="$(find caddy_uwsim)/launch/model.yaml" />
  	
    <node pkg="ldtravocean" name="model_node" type="model_node" args="$(find cart2)/data/config/cart2_model.xml">
        <!-- This will also adjust the model sampling time -->
    	<param name="Rate" value="10" />
    	<param name="ModelWrap" value="1"/>
    	<remap from="tauIn" to="tauOut" />
    	<remap from="meas" to="sim_meas" />
    	<param name="maxThrust" value="9.2" />
    	<param name="minThrust" value="-9.2" />
    	<remap from="imu_model" to="imu" />
    	<remap from="fix" to="gps" />
    </node> 
	  
    <node pkg="joy" name="joystick" type="joy_node">
      <param name="dev" value="/dev/input/js0" />
      <param name="coalesce_interval" value="0.1" />
      <param name="autorepeat_rate" value="10" />
      <param name="deadzone" value="0.05" />
    </node>
   
    
    <node pkg="labust_uvapp" name="velocity_control" type="velocity_control" />

    <node pkg="pladypos" type="nav_node" name="ekf_nav" />
    
    <node pkg="labust_uvapp" name="lf_control" type="lf_control" />
    <node pkg="labust_uvapp" name="dp_control" type="dp_control" />


 	<node pkg="rviz" name="rviz" type="rviz" />

    <!-- <node pkg="ldtravocean" name="simple_dp" type="simple_dp.py">
      <remap from="stateHat" to="meas" />
    </node> -->
  </group>
  
<!--  <group ns="dummy">
    <node pkg="ldtravocean" name="model_node" type="model_node" args="$(find cart2)/data/config/cart2_model.xml">
    	<param name="Rate" value="10" />
    	<param name="ModelWrap" value="1"/>
    	<remap from="tauIn" to="tauOut" />
    	<remap from="meas" to="sim_meas" />
    	<param name="maxThrust" value="9.2" />
    	<param name="minThrust" value="-9.2" />
    	<remap from="imu_model" to="imu" />
    	<remap from="fix" to="gps" />
    	<param name="tf_prefix" value="dummy" />
    </node> 
    
    <node pkg="joy" name="joystick" type="joy_node">
      <param name="dev" value="/dev/input/js1" />
      <param name="coalesce_interval" value="0.1" />
      <param name="autorepeat_rate" value="10" />
      <param name="deadzone" value="0.05" />
    </node>
    
    <node pkg="labust_uvapp" name="velocity_control" type="velocity_control" />
  </group> -->
</launch>
