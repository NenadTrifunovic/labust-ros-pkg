<launch> 
  <group ns="cart2">
    <rosparam command="load" file="$(find caddy_uwsim)/launch/simulation.yaml" />
    <rosparam command="load" file="$(find caddy_uwsim)/launch/model.yaml" />
  	
    <!--   <node pkg="UWSim" name="UWSim" type="UWSim" args="--configfile $(find cart2)/data/scenes/test_environment.xml --dataPath $(find cart2)/data/scenes"  /> -->
  		    
    <node pkg="ldtravocean" name="model_node" type="model_node" args="$(find cart2)/data/config/cart2_model.xml">
        <!-- This will also adjust the model sampling time -->
    	<param name="Rate" value="10" />
    	<param name="ModelWrap" value="10"/>
    	<remap from="tauIn" to="tauOut" />
    	<remap from="meas" to="sim_meas" />
    	<param name="maxThrust" value="9.2" />
    	<param name="minThrust" value="-9.2" />
    	<remap from="imu_model" to="imu" />
    	<remap from="fix" to="gps" />
    </node> 
	  
    <node pkg="joy" name="joystick" type="joy_node">
      <param name="dev" value="/dev/input/js1" />
      <param name="coalesce_interval" value="0.1" />
      <param name="autorepeat_rate" value="10" />
      <param name="deadzone" value="0.05" />
    </node>
    
    <node pkg="labust_uvapp" name="velocity_control" type="velocity_control">
      <remap from="tauOut" to="tauIn" />
      <!-- <remap from="stateHat" to="meas" /> -->
    </node>

    <node pkg="pladypos" type="nav_node" name="ekf_nav" >
    
    <node pkg="labust_uvapp" name="lf_control" type="lf_control" />

    <!-- <node pkg="ldtravocean" name="simple_dp" type="simple_dp.py">
      <remap from="stateHat" to="meas" />
    </node> -->
  </group>
</launch>
