<launch>
  <group>
  	<remap from="tauIn" to="tauOut" />
  	<remap from="meas_ideal" to="stateHat" /> 
	<include file="$(find labust_launchers)/launch/navcon_test/simulator.launch" />
  </group>

  <group ns="velcon">
  	<rosparam command="load" file="$(find labust_launchers)/launch/navcon_test/control.yaml" />
  	<rosparam command="load" file="$(env MODEL)" />
  	
  	<remap from="reference" to="/nuRefMerged" />
	<remap from="state" to="/stateHat" />
	<remap from="tracking" to="/tauAch" />
	<remap from="out" to="/tauOut" />
	<remap from="controller_state" to="/controller_state" />
  	
  	<node pkg="labust_control" type="single_dof_velcon" name="yaw_rate">
		<param name="dof" value="5" />
	</node>
  </group>
  
  <group ns="high_level">
	<rosparam command="load" file="$(find labust_launchers)/launch/navcon_test/control.yaml" />
	<remap from="out" to="nuRef" />
	<remap from="reference" to="/stateRef" />
	<remap from="state" to="/stateHat" />
	<remap from="windup" to="/tauAch" />
	<remap from="tracking" to="/nuRefMerged" />
	<remap from="controller_state" to="/controller_state" />

	<node pkg="labust_control" type="single_dof_state" name="hdg_control">
		<param name="dof" value="5" />
	</node>

	<node pkg="labust_control" type="async_merger" name="nu_merger">
	   	<remap from="in" to="nuRef" />
		<remap from="out" to="/nuRefMerged" />
		<param name="merge_nu" value="true" />
	</node>
  </group>
  
  <group>
	<rosparam command="load" file="$(find matlogger)/data/pid_info_t.yaml" />
  	<rosparam command="load" file="$(find labust_launchers)/launch/navcon_test/logger.yaml" />
  	<include file="$(find matlogger)/launch/std_logger.launch" />
  </group>
</launch>
