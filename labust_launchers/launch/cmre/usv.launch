<launch>
  <include file="$(find labust_launchers)/launch/caddy/$(env ROBOT).machine" />
  <arg name="is_sim" value="$(optenv IS_SIM 1)" />     

  <group ns="usv">
  	<rosparam command="load" file="$(find snippets)/data/locations/$(env LOCATION).yaml" />
  	
  	<include file="$(find labust_launchers)/config/control/joy.xml"/>
  	
  	<!-- <group ns="navigation"> -->
  		<rosparam command="load" file="$(env MODEL)" />
  	  	<rosparam command="load" file="$(find labust_launchers)/config/cmre/usv/navparams.yaml" />
  	  	
  	  	<remap from="tauAch" to="/usv/tauAch" /> 
  	  	  		
  		<include file="$(find labust_launchers)/config/navigation/navigation2D.xml" />
  	<!-- </group> -->
  	
  	<!-- <group ns="control"> -->
  		<rosparam command="load" file="$(env MODEL)" />
  		<rosparam command="load"
			file="$(find labust_launchers)/config/cmre/usv/velocity_control.yaml" />
		<rosparam command="load"
			file="$(find labust_launchers)/config/cmre/usv/dp_control.yaml" />
			
		<remap from="stateHat" to="/usv/stateHat" />
		<remap from="state" to="/usv/stateHat" /> 
  		
  		<include file="$(find labust_launchers)/config/control/control_all.xml" />
  		
  		<!-- The simple execution manager -->
  		<rosparam command="load" file="$(find labust_launchers)/config/cmre/usv/manager.yaml" />
  		<include file="$(find labust_launchers)/config/control/manager.xml" />
  	<!-- </group> -->
  	
  	<!-- <group ns="simulation" if="$(arg is_sim)"> -->
  	<group if="$(arg is_sim)">
  		<rosparam command="load" file="$(env MODEL)" />
  		<rosparam command="load" file="$(env ALLOCATION_MODEL)" />
  		
  		<remap from="fix" to="/usv/gps" />
  		<remap from="imu" to="/usv/imu" />
		<remap from="tauIn" to="/usv/tauOut" />
		<remap from="tauAch" to="/usv/tauAch" />
			
  		<include file="$(find labust_launchers)/config/simulator/simulator.xml" />
  	</group>
  	<!-- </group> -->  	
  </group>
</launch>
